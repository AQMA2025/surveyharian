<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#006837">
    <title>Survey Kepuasan Pelanggan - Aqshamart</title>
    <style>
        :root {
            --primary-color: #006837;
            --secondary-color: #FF6B1B;
            --light-color: #f8f9fa;
            --dark-color: #343a40;
            --gray-color: #6c757d;
            --border-radius: 8px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        /* Styling untuk loading overlay */
        .loading-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .loader {
            width: 60px;
            height: 60px;
            border: 5px solid rgba(0, 104, 55, 0.2);
            border-radius: 50%;
            border-top: 5px solid var(--primary-color);
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        .loading-text {
            color: var(--primary-color);
            font-weight: 600;
            font-size: 16px;
            text-align: center;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            font-size: 16px;
        }
        
        .container {
            width: 100%;
            padding: 0 10px;
            margin: 0 auto;
        }
        
        header {
            background-color: white;
            box-shadow: var(--box-shadow);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .logo {
            max-width: 300px;
            height: auto;
        }
        
        .hero {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 30px 0;
            text-align: center;
        }
        
        .hero h1 {
            font-size: 1.8rem;
            margin-bottom: 15px;
        }
        
        .hero p {
            font-size: 1rem;
            margin: 0 auto;
            padding: 0 15px;
        }
        
        .survey-container {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px 15px;
            margin: -15px 10px 30px;
            position: relative;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark-color);
            font-size: 1rem;
        }
        
        .form-control {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: border-color 0.3s;
            -webkit-appearance: none;
        }
        
        .form-control:focus {
            border-color: var(--primary-color);
            outline: none;
        }
        
        .rating {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .rating-option {
            display: flex;
            align-items: center;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.3s;
            background-color: white;
        }
        
        .rating-option:hover {
            border-color: var(--primary-color);
            background-color: #f8f9fa;
        }
        
        .rating-option input {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            accent-color: var(--primary-color);
        }
        
        .rating-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(0, 104, 55, 0.1);
        }
        
        .submit-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            padding: 15px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
            margin-top: 20px;
            -webkit-appearance: none;
        }
        
        .submit-btn:hover {
            background-color: #e5611a;
        }
        
        .gift-section {
            background-color: #fffaf0;
            border: 2px dashed var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-top: 25px;
            text-align: center;
        }
        
        .gift-section h3 {
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .gift-section p {
            font-size: 0.95rem;
        }
        
        .other-input {
            display: none;
            margin-top: 10px;
        }
        
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 25px 0 15px;
            margin-top: 30px;
            font-size: 0.9rem;
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
        }
        
        .footer-section {
            margin-bottom: 20px;
        }
        
        .footer-section h3 {
            margin-bottom: 12px;
            color: var(--secondary-color);
            font-size: 1.1rem;
        }
        
        .footer-section p, .footer-section a {
            display: block;
            margin-bottom: 8px;
            color: var(--light-color);
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-section a:hover {
            color: var(--secondary-color);
        }
        
        .copyright {
            text-align: center;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.8rem;
        }
        
        .thankYou-container {
            display: none;
            text-align: center;
            padding: 30px 0;
        }
        
        .thankYou-container h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .thankYou-container p {
            font-size: 0.95rem;
            margin-bottom: 10px;
        }
        
        /* Mobile-specific optimizations */
        input[type="text"],
        input[type="tel"],
        textarea {
            font-size: 16px; /* Prevents iOS zoom on focus */
        }
        
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        /* Fix for iOS Safari padding issues */
        select {
            background-color: white;
        }
        
        /* Active state for better touch feedback */
        .submit-btn:active {
            opacity: 0.8;
        }
        
        /* Fix tap highlight color */
        * {
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body>
    <!-- Loading overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loader"></div>
        <div class="loading-text">Sedang memproses survey Anda...</div>
    </div>
    
    <section class="hero">
        <div class="container">
            <h1>Survey Kepuasan Pelanggan</h1>
            <p>Pendapat anda merupakan bahan bakar kami untuk memperbaiki dan meningkatakan kualitas layanan
            </p>
        </div>
    </section>
    
    <div class="container">
        <div class="survey-container">
            <form id="customerSurvey">
                <!-- Pertanyaan 1: Kepuasan -->
                <div class="form-group">
                    <label>Seberapa puas pengalaman anda belanja Via Call Center Hari ini?</label>
                    <div class="rating">
                        <div class="rating-option">
                            <input type="radio" name="satisfaction" id="very_satisfied" value="Sangat Puas" required>
                            <label for="very_satisfied">😊 Excellent</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" name="satisfaction" id="satisfied" value="Puas">
                            <label for="satisfied">🙂 Puas</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" name="satisfaction" id="neutral" value="Biasa Saja">
                            <label for="neutral">😐 Biasa Saja</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" name="satisfaction" id="not_satisfied" value="Tidak Puas">
                            <label for="not_satisfied">🙁 Kurang</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" name="satisfaction" id="disappointing" value="Mengecewakan">
                            <label for="disappointing">😞 Mengecewakan</label>
                        </div>
                    </div>
                </div>

                <!-- Pertanyaan 2: Area Perbaikan -->
                <div class="form-group">
                    <label>Menurut anda, Apa yang harus Aqshamart perbaiki di layanan call center hari ini?</label>
                    <div class="rating">
                        <div class="rating-option">
                            <input type="radio" name="improvement" id="response_speed" value="Kecepatan Respon Chat" required>
                            <label for="response_speed">Kecepatan Respon Chat</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" name="improvement" id="delivery_time" value="Durasi Waktu Pengiriman">
                            <label for="delivery_time">Durasi Waktu Pengiriman</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" name="improvement" id="order_accuracy" value="Akurasi Pesanan">
                            <label for="order_accuracy">Akurasi Pesanan</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" name="improvement" id="staff_knowledge" value="Pengetahuan Staff Call Center terhadap Produk">
                            <label for="staff_knowledge">Pengetahuan Staff Call Center terhadap Produk</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" name="improvement" id="delivery_attitude" value="Sikap Staff Delivery">
                            <label for="delivery_attitude">Sikap Staff Delivery</label>
                        </div>
                        <div class="rating-option">
                            <input type="radio" name="improvement" id="other" value="Lainnya">
                            <label for="other">Lainnya</label>
                        </div>
                    </div>
                    <div class="other-input" id="otherInput">
                        <textarea id="other_detail" class="form-control" placeholder="Jelaskan hal lain yang perlu diperbaiki..."></textarea>
                    </div>
                </div>

                <!-- Pertanyaan 3: Nama -->
                <div class="form-group">
                    <label for="name">Nama *</label>
                    <input type="text" id="name" class="form-control" placeholder="Masukkan nama Anda" required>
                </div>
                
                <!-- Pertanyaan 4: No. WA -->
                <div class="form-group">
                    <label for="phone">No. WhatsApp *</label>
                    <input type="tel" id="phone" class="form-control" placeholder="Contoh: 081234567890" required>
                </div>
                
                <button type="submit" class="submit-btn">Kirim Survey Sekarang Juga</button>
            </form>
            
            <div class="thankYou-container" id="thankYou">
                <h2>Terimakasih sudah menjadi pelanggan setia Aqshamart selama ini</h2>
                <p>Semoga Bapak/Ibu serta keluarga diberikan kesehatan dan Rezeki yang berkah. Amin</p>
                <p></p>
                <p><strong>Aqshamart</strong><br>
                Ruko Centro Havana Blok MA/7<br>
                Telp: 0898-2050-212</p>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Tentang Aqshamart</h3>
                    <p>Aqshamart adalah perintis minimarket modern syariah yang berkomitmen menghadirkan produk berkualitas bersertifikasi halal MUI dengan memberikan pengalaman berbelanja yang berbeda dalam memenuhi kebutuhan harian pelanggan.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Hubungi Kami</h3>
                    <p><i class="fa fa-map-marker"></i> Ruko Centro Havana Blok MA/7</p>
                    <p><i class="fa fa-phone"></i> 0898-2050-212</p>
                </div>
                
                <div class="footer-section">
                    <h3>Jam Operasional</h3>
                    <p>Senin - Minggu: 06:30 - 21:30</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 Aqshamart. Semua Hak Dilindungi.</p>
            </div>
        </div>
    </footer>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('customerSurvey');
            const thankYouContainer = document.getElementById('thankYou');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const otherInput = document.getElementById('otherInput');
            const otherRadio = document.getElementById('other');
            
            // Add click handlers for rating options
            const ratingOptions = document.querySelectorAll('.rating-option');
            ratingOptions.forEach(option => {
                option.addEventListener('click', function() {
                    // Remove selected class from all options in this group
                    const radioName = this.querySelector('input').name;
                    document.querySelectorAll(`input[name="${radioName}"]`).forEach(radio => {
                        radio.closest('.rating-option').classList.remove('selected');
                    });
                    // Add selected class to clicked option
                    this.classList.add('selected');
                    // Check the radio button
                    this.querySelector('input').checked = true;
                    
                    // Show/hide other input for improvement question
                    if (radioName === 'improvement') {
                        if (this.querySelector('input').value === 'Lainnya') {
                            otherInput.style.display = 'block';
                            document.getElementById('other_detail').required = true;
                        } else {
                            otherInput.style.display = 'none';
                            document.getElementById('other_detail').required = false;
                            document.getElementById('other_detail').value = '';
                        }
                    }
                });
            });
            
            // Form submission handling
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Show loading overlay
                loadingOverlay.style.display = 'flex';
                
                // Get improvement value
                let improvementValue = document.querySelector('input[name="improvement"]:checked').value;
                if (improvementValue === 'Lainnya') {
                    improvementValue = document.getElementById('other_detail').value;
                }
                
                // Collect form data
                const formData = {
                    satisfaction: document.querySelector('input[name="satisfaction"]:checked').value,
                    improvement: improvementValue,
                    name: document.getElementById('name').value,
                    phone: document.getElementById('phone').value,
                    timestamp: new Date().toISOString()
                };
                
                // Format phone number
                let phoneNumber = formData.phone;
                if(phoneNumber.startsWith('0')) {
                    phoneNumber = '62' + phoneNumber.substring(1);
                } else if(!phoneNumber.startsWith('62')) {
                    phoneNumber = '62' + phoneNumber;
                }
                phoneNumber = phoneNumber.replace(/\D/g, '');
                
                // Send to Google Sheets
                const scriptURL = 'https://script.google.com/macros/s/AKfycbyMkrSwwE-MZmt9s-FbT3DEwbeZGOzngJlVw4gaExV2iBxIPppsSWDhhY9jKFuTfPZyig/exec';
                
                setTimeout(function() {
                    // Send to Google Sheets
                    fetch(scriptURL, {
                        method: 'POST',
                        mode: 'no-cors',
                        cache: 'no-cache',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        redirect: 'follow',
                        body: JSON.stringify(formData)
                    })
                    .then(() => {
                        console.log('Data berhasil dikirim ke Google Sheets');
                        
                        // Send WhatsApp message
                        const message = `Terimakasih Bapak/Ibu *${formData.name}* telah mengisi survey kepuasan pelanggan Aqshamart! *Untuk Informasi Pesan Antar* Klik Link > https://wa.me/628982050212`;
                        
                        const woowaAPI = 'https://crm.woo-wa.com/send/message-text';
                        const woowaData = {
                            deviceId: 'd_ID@6753a3309becd_V25MY7j95sjMF',
                            number: phoneNumber,
                            message: message
                        };
                        
                        return fetch(woowaAPI, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'Cache-Control': 'no-cache'
                            },
                            body: JSON.stringify(woowaData)
                        });
                    })
                    .then(response => {
                        console.log('WhatsApp message sent!');
                        
                        // Hide loading overlay
                        loadingOverlay.style.display = 'none';
                        
                        // Show thank you message
                        form.style.display = 'none';
                        thankYouContainer.style.display = 'block';
                        
                        // Scroll to top
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                        
                        // Reset form
                        form.reset();
                        // Remove selected classes
                        document.querySelectorAll('.rating-option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        // Hide other input
                        otherInput.style.display = 'none';
                    })
                    .catch(error => {
                        console.error('Error!', error);
                        
                        // Hide loading overlay
                        loadingOverlay.style.display = 'none';
                        
                        // Still show thank you message
                        form.style.display = 'none';
                        thankYouContainer.style.display = 'block';
                        
                        // Scroll to top
                        window.scrollTo({
                            top: 0,
                            behavior: 'smooth'
                        });
                    });
                }, 1500);
            });
        });
    </script>
</body>
</html>